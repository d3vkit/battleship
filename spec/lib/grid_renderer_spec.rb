require_relative '../../lib/player_grid'
require_relative '../../lib/grid_renderer'

RSpec.describe GridRenderer do
  describe '#draw' do
    let(:player_grid) { PlayerGrid.new }

    it 'returns the stylized grid' do
      results = player_grid.draw

      expected = <<~HEREDOC
            1   2   3   4   5   6   7   8   9  10
          |---------------------------------------|
        A |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        B |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        C |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        D |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        E |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        F |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        G |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        H |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        I |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
        J |   |   |   |   |   |   |   |   |   |   |
          |---------------------------------------|
      HEREDOC

      expect(results).to eq expected
    end

    context 'with ships on the grid' do
      let(:ship1) { Ship.new('A1, A2', size: 2) }
      let(:ship2) { Ship.new('B1, B3', size: 3) }

      before { player_grid.ships = [ship1, ship2] }

      it 'returns the stylized grid' do
        expected = <<~HEREDOC
              1   2   3   4   5   6   7   8   9  10
            |---------------------------------------|
          A | ~ | ~ |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          B | ~ | ~ | ~ |   |   |   |   |   |   |   |
            |---------------------------------------|
          C |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          D |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          E |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          F |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          G |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          H |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          I |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
          J |   |   |   |   |   |   |   |   |   |   |
            |---------------------------------------|
        HEREDOC

        results = player_grid.draw

        expect(results).to eq expected
      end

      context 'with enemy hits' do
        it 'returns the stylized grid' do
          expected = <<~HEREDOC
                1   2   3   4   5   6   7   8   9  10
              |---------------------------------------|
            A | ~ | ~ |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            B | ~ | ~ | ~ |   |   |   |   |   |   |   |
              |---------------------------------------|
            C |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            D |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            E |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            F |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            G |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            H |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            I |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
            J |   |   |   |   |   |   |   |   |   |   |
              |---------------------------------------|
          HEREDOC
        end
      end
    end
  end
end
